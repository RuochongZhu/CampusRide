<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Maps è‡ªåŠ¨å®Œæˆæµ‹è¯•</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAi0TLayPvI8vfhD33bNtaVyoGHTjZ91F4&libraries=places"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #B31B1B;
      margin-bottom: 10px;
    }
    .status {
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .success {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }
    .error {
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }
    .warning {
      background-color: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
    }
    .input-group {
      margin: 20px 0;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 8px;
      color: #333;
    }
    input {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
    }
    input:focus {
      outline: none;
      border-color: #B31B1B;
    }
    .hint {
      font-size: 14px;
      color: #666;
      margin-top: 5px;
    }
    button {
      background-color: #B31B1B;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    button:hover {
      background-color: #8F1515;
    }
    .test-suggestions {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .test-suggestions ul {
      margin: 10px 0;
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ—ºï¸ Google Maps è‡ªåŠ¨å®ŒæˆåŠŸèƒ½æµ‹è¯•</h1>
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•Google Maps Places APIæ˜¯å¦æ­£å¸¸å·¥ä½œ</p>

    <div id="status"></div>

    <div class="test-suggestions">
      <strong>ğŸ§ª æµ‹è¯•å»ºè®®ï¼š</strong>
      <ul>
        <li>è¾“å…¥ <code>cayu</code> â†’ åº”è¯¥çœ‹åˆ° "Cayuga Lake"</li>
        <li>è¾“å…¥ <code>corn</code> â†’ åº”è¯¥çœ‹åˆ° "Cornell University"</li>
        <li>è¾“å…¥ <code>ithaca</code> â†’ åº”è¯¥çœ‹åˆ° "Ithaca, NY"</li>
        <li>è¾“å…¥ <code>new yo</code> â†’ åº”è¯¥çœ‹åˆ° "New York, NY"</li>
        <li>è¾“å…¥ <code>jfk</code> â†’ åº”è¯¥çœ‹åˆ° "JFK Airport"</li>
      </ul>
    </div>

    <div class="input-group">
      <label for="origin">ğŸš€ Origin (èµ·ç‚¹)</label>
      <input id="origin" type="text" placeholder="è¾“å…¥èµ·ç‚¹...ä¾‹å¦‚ï¼šIthaca æˆ– Cornell">
      <div class="hint">å¼€å§‹è¾“å…¥ï¼Œåº”è¯¥ä¼šçœ‹åˆ°è‡ªåŠ¨å»ºè®®ä¸‹æ‹‰æ¡†</div>
    </div>

    <div class="input-group">
      <label for="destination">ğŸ¯ Destination (ç»ˆç‚¹)</label>
      <input id="destination" type="text" placeholder="è¾“å…¥ç»ˆç‚¹...ä¾‹å¦‚ï¼šNew York æˆ– JFK">
      <div class="hint">å¼€å§‹è¾“å…¥ï¼Œåº”è¯¥ä¼šçœ‹åˆ°è‡ªåŠ¨å»ºè®®ä¸‹æ‹‰æ¡†</div>
    </div>

    <div id="result"></div>

    <button onclick="showResults()">æ˜¾ç¤ºé€‰æ‹©ç»“æœ</button>
  </div>

  <script>
    const statusDiv = document.getElementById('status');
    const resultDiv = document.getElementById('result');
    
    let selectedOrigin = null;
    let selectedDestination = null;

    // æ£€æŸ¥Google Mapsæ˜¯å¦åŠ è½½
    function checkGoogleMaps() {
      if (window.google && window.google.maps && window.google.maps.places) {
        statusDiv.innerHTML = `
          <div class="status success">
            <strong>âœ… Google Maps åŠ è½½æˆåŠŸï¼</strong><br>
            Places API å¯ç”¨ - è‡ªåŠ¨å®ŒæˆåŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ
          </div>
        `;
        return true;
      } else {
        statusDiv.innerHTML = `
          <div class="status error">
            <strong>âŒ Google Maps æœªåŠ è½½</strong><br>
            è¯·æ£€æŸ¥APIå¯†é’¥æˆ–ç½‘ç»œè¿æ¥
          </div>
        `;
        return false;
      }
    }

    // åˆå§‹åŒ–è‡ªåŠ¨å®Œæˆ
    function initAutocomplete() {
      if (!checkGoogleMaps()) {
        setTimeout(initAutocomplete, 500);
        return;
      }

      try {
        const originInput = document.getElementById('origin');
        const destInput = document.getElementById('destination');

        // Origin è‡ªåŠ¨å®Œæˆ
        const originAutocomplete = new google.maps.places.Autocomplete(originInput, {
          types: ['geocode', 'establishment'],
        });

        originAutocomplete.addListener('place_changed', () => {
          const place = originAutocomplete.getPlace();
          selectedOrigin = place;
          console.log('Origin selected:', place);
          
          if (place.formatted_address) {
            statusDiv.innerHTML = `
              <div class="status success">
                <strong>âœ… Origin å·²é€‰æ‹©ï¼š</strong><br>
                ${place.formatted_address || place.name}
              </div>
            `;
          }
        });

        // Destination è‡ªåŠ¨å®Œæˆ
        const destAutocomplete = new google.maps.places.Autocomplete(destInput, {
          types: ['geocode', 'establishment'],
        });

        destAutocomplete.addListener('place_changed', () => {
          const place = destAutocomplete.getPlace();
          selectedDestination = place;
          console.log('Destination selected:', place);
          
          if (place.formatted_address) {
            statusDiv.innerHTML = `
              <div class="status success">
                <strong>âœ… Destination å·²é€‰æ‹©ï¼š</strong><br>
                ${place.formatted_address || place.name}
              </div>
            `;
          }
        });

        console.log('âœ… è‡ªåŠ¨å®Œæˆåˆå§‹åŒ–æˆåŠŸ');

      } catch (error) {
        console.error('åˆå§‹åŒ–å¤±è´¥:', error);
        statusDiv.innerHTML = `
          <div class="status error">
            <strong>âŒ åˆå§‹åŒ–å¤±è´¥</strong><br>
            ${error.message}
          </div>
        `;
      }
    }

    function showResults() {
      if (selectedOrigin && selectedDestination) {
        resultDiv.innerHTML = `
          <div class="status success" style="margin-top: 20px;">
            <strong>ğŸ‰ æµ‹è¯•æˆåŠŸï¼</strong><br><br>
            <strong>Origin:</strong> ${selectedOrigin.formatted_address || selectedOrigin.name}<br>
            <strong>Destination:</strong> ${selectedDestination.formatted_address || selectedDestination.name}<br><br>
            âœ… Google Maps è‡ªåŠ¨å®ŒæˆåŠŸèƒ½å·¥ä½œæ­£å¸¸ï¼<br>
            æ‚¨ç°åœ¨å¯ä»¥åœ¨Carpoolingé¡µé¢ä½¿ç”¨æ­¤åŠŸèƒ½äº†ã€‚
          </div>
        `;
      } else if (selectedOrigin || selectedDestination) {
        resultDiv.innerHTML = `
          <div class="status warning" style="margin-top: 20px;">
            <strong>âš ï¸ è¯·å®Œæˆé€‰æ‹©</strong><br>
            æ‚¨è¿˜éœ€è¦é€‰æ‹©å¦ä¸€ä¸ªåœ°ç‚¹
          </div>
        `;
      } else {
        resultDiv.innerHTML = `
          <div class="status warning" style="margin-top: 20px;">
            <strong>âš ï¸ æœªé€‰æ‹©åœ°ç‚¹</strong><br>
            è¯·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å¹¶ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©åœ°ç‚¹
          </div>
        `;
      }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.onload = () => {
      statusDiv.innerHTML = `
        <div class="status warning">
          <strong>â³ æ­£åœ¨åŠ è½½ Google Maps...</strong>
        </div>
      `;
      initAutocomplete();
    };
  </script>
</body>
</html>





