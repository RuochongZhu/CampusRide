## Claude Code 备忘录 (开发者笔记)

> **重要**: 此备忘录供 Claude Code 和开发团队参考，记录已知问题和解决方案。

### 已知问题 #1: Write 工具长内容写入失败

**问题描述**:
当使用 `Write` 工具一次性写入超长内容（如完整的测试清单、大型配置文件）时，工具参数可能丢失，导致报错：
```
InputValidationError: Write failed due to the following issues:
The required parameter `file_path` is missing
The required parameter `content` is missing
```

**解决方案**:
1. **分段写入法**: 先用 `Write` 写入文件的第一部分（较短内容），然后用 `Edit` 工具逐段追加剩余内容
2. **使用 Bash**: 对于纯文本，可以用 `cat << 'EOF' > file.md` 的方式写入
3. **内容分块**: 将长内容拆分为多个较小的块，每块不超过 2000-3000 字符

**示例**:
```
# 步骤1: 先写入文件头部
Write(file_path="xxx.md", content="# 标题\n\n第一部分内容...")

# 步骤2: 用 Edit 追加后续内容
Edit(file_path="xxx.md", old_string="第一部分最后一行", new_string="第一部分最后一行\n\n第二部分内容...")
```

### 已知问题 #2: 工具调用参数验证

**问题描述**:
工具调用时如果参数格式不正确或缺失，会导致 `InputValidationError`。

**预防措施**:
1. 调用工具前确保所有必需参数都已提供
2. 对于长字符串参数，考虑分段处理
3. 测试短内容确认工具正常工作后，再处理长内容